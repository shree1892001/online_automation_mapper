const NewYorkForLLC = require('../handlers/NewYorkForLLCFormHandler.js'); 
const NewYorkForCORP = require('../handlers/NewYorkForCORPFormHandler.js');
const NewJersyForLLC = require('../handlers/NewJersyForLLCFormHandler.js');
const NewJersyForCORP = require('../handlers/NewJersyForCORPFormHandler.js')
const MontanaForLLC =  require('../handlers/MontanaForLLCFormHandler.js')
const MontanaForCORP =  require('../handlers/MontanaForCORPFormHandler.js')
const WyomingForLLC = require('../handlers/WyomingForLLCFormHandler.js')
const WyomingForCORP = require('../handlers/WyomingForCORPFormHandler.js')
const ColoradoForLLC = require('../handlers/ColoradoForLLC.js')
const KentuckyForLLC = require('../handlers/KentuckyForLLCFormHandler.js')
const KentuckyForCORP = require('../handlers/KentuckyForCORPFormHandler.js')
const FloridaForLLC = require('../handlers/FloridaForLLCFormHandler.js')
const FloridaForCORP = require('../handlers/FloridaForCORPFormHandler.js')
const IowaForLLC = require('../handlers/IowaForLLCFormHandler.js')
const IowaForCORP = require('../handlers/IowaForCORPFormHandler.js')
const IndianaForLLC = require('../handlers/IndianaForLLCFormHandler.js')
const IndianaForCORP = require('../handlers/IndianaForCORPFormHandler.js')
const MarylandForLLC = require('../handlers/MarylandForLLCFormHandler.js')
const MarylandForCORP = require('../handlers/MarylandForCORPFormHandler.js')
const OklahomaForLLC = require('../handlers/OklahomaForLLCFormHandler.js')
const OklahomaForCORP = require('../handlers/OklahomaForCORPFormHandler.js')
const DcForLLC = require('../handlers/DcForLLCHandler.js')
const DcForCORP = require('../handlers/DcForCORPHandler.js')
const KansasForLLC = require('../handlers/KansasForLLCFormHandler.js')
const KansasForCORP = require('../handlers/KansasForCORPFormHandler.js')
const IdahoForLLC = require('../handlers/IdahoForLLCFormHandler.js')
const IdahoForCORP = require('../handlers/IdahoForCORPFormHandler.js')
const AlaskaForLLC = require('../handlers/AlaskaForLLCFormHandler.js')
const AlaskaForCORP = require('../handlers/AlaskaForCORPFormHandler.js')
const AlabamaForLLC = require('../handlers/AlabamaForLLCFormHandler.js')
const AlabamaForCORP = require('../handlers/AlabamaForCORPFormHandler.js')
const SouthDakotaForLLC = require('../handlers/SouthDakotaForLLCFormHandler.js')
const SouthDakotaForCORP = require('../handlers/SouthDakotaForCORPFormHandler.js')
const ArkansasForLLC = require('../handlers/ArkansasForLLCFormHandler.js')
const ArkansasForCORP = require('../handlers/ArkansasForCORPFormHandler.js')
const TennesseeForLLC = require('../handlers/TennesseeForLLCFormHandler.js')
const TennesseeForCORP = require('../handlers/TennesseeForCORPFormHandler.js')
const HawaiiForLLC = require('../handlers/HawaiiForLLC.js');
const HawaiiForCorp = require('../handlers/HawaiiForCorp.js');
const NorthDakotaForLLC = require('../handlers/NorthDakotaForLLC.js'); 
const NorthDakotaForCorp =require('../handlers/NorthDakotaForCorp.js');
const UtahForLLC =require('../handlers/UtahForLLCFormHandler.js')
const MissouriForLLC= require('../handlers/MissouriForLLC.js');
const MissouriForCorp = require('../handlers/MissouriForCorp.js');
const ColoradoForCorp = require('../handlers/ColoradoForCorp.js');
const MichiganLLC = require('../handlers/MichiganLLCFormHandler.js') 
const MichiganCORP = require('../handlers/MichiganCORPFormHandler.js')  
const RhodeislandForLLC = require('../handlers/RhodeislandForLLCHandler.js')
const RhodeislandForCORP = require('../handlers/RhodeislandForCORPHandler.js')
const NewmaxicoForLLC = require('../handlers/NewmaxicoForLLCHandler.js')
const SouthCarolinaForLLC = require('../handlers/SouthCarolinaForLLCFormHandler.js')
const SouthCarolinaForCORP = require('../handlers/SouthCarolinaForCORPFormHandler.js')
const LouisianaForLLC = require('../handlers/LouisianaForLLCFormHandler.js')
const LouisianaForCORP = require('../handlers/LouisianaForCORPFormHandler.js')   
const OregonForLLC= require('../handlers/OregonForLLCHandler.js'); 
const OregonForCorp =require('../handlers/OregonForCORPHandler.js');
const IllinoisForLLC=require('../handlers/IllinoisForLLCFormHandler.js'); 
const IllinoisForCORP=require('../handlers/IllinoisForCORPFormHandler.js')
const MississippiForLLC = require('../handlers/MississippiForLLCHandler.js')
const MississippiForCORP = require('../handlers/MississippiForCORPHandler.js')
const NebraskaForLLC = require('../handlers/NebraskaForLLCFormHandler.js')
const NebraskaForCORP = require('../handlers/NebraskaForCORPFormHandler.js')
const MassachusettsForCORP = require('../handlers/MassachusettsForCORPFormHandler.js')
const MassachusettsForLLC = require('../handlers/MassachusettsForLLCFromHandler.js')
const NorthCarolinaForLLC = require('../handlers/NorthCarolinaForLLCFormHandler (1).js')
const NorthCarolinaForCorp = require('../handlers/NorthCarolinaForCORPFormHandler (1).js')
const OhioForLLC = require('../handlers/OhioForLLCFormHandler.js')
const OhioForCORP = require('../handlers/OhioForCORPFormHandler.js')
const MinnesotaForCORP = require('../handlers/MinnesotaForCORPFormHandler.js')
const MinnesotaForLLC = require('../handlers/MinnesotaForLLCFormHandler.js')
const WashingtonForLLC=require('../handlers/WashingtonForLLCFormHandler.js')
const WashingtonForCorp=require('../handlers/WashingtonForCORPFormHandler.js')
const VermontForLLC=require('../handlers/VermontForLLCFormHandler.js')
const VermontForCorp = require('../handlers/VermontForCORPFormHandler.js')
const VirginiaForLLC = require('../handlers/VirginiaForLLCFormHandler.js')
const VirginiaForCORP = require('../handlers/VirginiaForCORPFormHandler.js')
const GeorgiaForLLC = require('../handlers/GeorgiaForLLC.js')
const GeorgiaForCorp = require('../handlers/GeorgiaForCorp.js')
const NewhampshireForLLC = require('../handlers/NewHampshireForLLCFormHandler.js')
const NewhampshireForCORP = require('../handlers/NewhampshireForCORPFormHandler.js')
const UtahForCORP = require('../handlers/UtahForCORPFormHandler.js');
// const MontanaFormHandler = require('../handlers/MontanaFormHandler');
const logger = require('../utils/logger');
const { json } = require('express/lib/response.js');

class StateFormFactory {
    static async getFormHandler(page,jsonData) {
        const data = Object.values(jsonData)[0];
        const state = data?.State?.stateFullDesc; 
        console.log('State:', state);
        logger.info(`Factory creating form handler for state: ${state}`);
        const entity_type = data?.EntityType?.orderShortName?.toUpperCase();
        console.log('Entity Type:', entity_type);
        const payload = data?.payload;
        if (payload?.registered_agent) {
            const RA = payload?.registered_agent;
            console.log(RA)
            // If Mailing_Information is missing, replace it with Registered_Agent values
            if (!RA.Mailing_Information) {
                RA.Mailing_Information = {
                    MI_Name: RA.RA_Name,
                    MI_Email_Address: RA.RA_Email_Address,
                    MI_Contact_No: RA.RA_Contact_No,
                    MI_Address_Line_1: RA.Address.RA_Address_Line_1,
                    MI_Address_Line_2: RA.Address.RA_Address_Line_2,
                    MI_City: RA.Address.RA_City,
                    MI_Zip_Code: RA.Address.RA_Zip_Code,
                    MI_State: RA.Address.RA_State
                };
            }
        
            // If Billing_Information is missing, replace it with Registered_Agent values
            if (!RA.Billing_Information) {
                RA.Billing_Information = {
                    BI_Name: RA.RA_Name,
                    BI_Email_Address: RA.RA_Email_Address,
                    BI_Contact_No: RA.RA_Contact_No,
                    BI_Address_Line_1: RA.Address.RA_Address_Line_1,
                    BI_Address_Line_2: RA.Address.RA_Address_Line_2,
                    BI_City: RA.Address.RA_City,
                    BI_Zip_Code: RA.Address.RA_Zip_Code,
                    BI_State: RA.Address.RA_State
                };
            }
        }
        console.log(payload)
       
        try{
            switch (state) {
                case 'Alabama':
                    if (entity_type == "LLC"){
                        const AlabamaForLLCHandler = new AlabamaForLLC();
                        return async () => {
                            const result =  await AlabamaForLLCHandler.AlabamaForLLC(page,jsonData,payload);
                            return result
  
                        }; 
                    }
                    else if (entity_type == "CORP"){
                        const AlabamaForCORPHandler = new AlabamaForCORP();
                        return async () => {
                            const result =  await AlabamaForCORPHandler.AlabamaForCORP(page,jsonData,payload);
                            return result
                        }
                         
                    }
                    case "New Hampshire":
                        if (entity_type == "LLC"){
                            const NewhampshireForLLCHandler = new NewhampshireForLLC();
                            return async () => {
                                const result =  await NewhampshireForLLCHandler.NewhampshireForLLC(page,jsonData,payload);
                                return result
                            }
                        }
                        else if (entity_type == "CORP"){
                            const NewhampshireForCORPHandler = new NewhampshireForCORP();
                            return async () => {
                                const result =  await NewhampshireForCORPHandler.NewhampshireForCORP(page,jsonData,payload);
                                return result
                            }
                        }
                       

                case 'Alaska':
                    if (entity_type == "LLC"){
                        const AlaskaForLLCHandler = new AlaskaForLLC();
                        return async () => {
                            const result = await AlaskaForLLCHandler.AlaskaForLLC(page,jsonData,payload);
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const AlaskaForCORPFormHandler = new AlaskaForCORP();
                        return async () => {
                            const result = await AlaskaForCORPFormHandler.AlaskaForCORP(page,jsonData,payload);
                            return result;
                        }

                    }

                    case 'Georgia':
                        if (entity_type == "LLC"){
                            const GeorgiaForLLCHandler = new GeorgiaForLLC();
                            return async () => {
                                const result = await GeorgiaForLLCHandler.GeorgiaForLLC(page,jsonData,payload);
                                return result;
                            }
                        }
                        else if (entity_type == "CORP"){
                            const GeorgiaForCORPFormHandler = new GeorgiaForCorp();
                            return async () => {
                                const result = await GeorgiaForCORPFormHandler.GeorgiaForCorp(page,jsonData,payload);
                                return result;
                            }
    
                        }
                case 'Washington':
                    if (entity_type=="LLC"){
                        const WashingtonLLCHandler =new WashingtonForLLC(); 
                        return async()=>{
                            const result = await WashingtonLLCHandler.WashingtonForLLC(page,jsonData,payload);
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const NewYorkForCORPHandler = new WashingtonForCorp();
                        return async () => {
                            const result = await NewYorkForCORPHandler.WashingtonForCORP(page,jsonData,payload);
                            return result;                            
                        }
                         
                    }
                case 'New York':
                    if (entity_type == "LLC"){
                        const NewYorkForLLCHandler = new NewYorkForLLC();
                        // await NewYorkForLLCHandler.NewYorkForLLC(page,jsonData,payload);
                        // return NewYorkForLLCHandler;
                        return async () => {
                            const result = await NewYorkForLLCHandler.NewYorkForLLC(page,jsonData,payload);
                            return result;
                        }; 
                    }
                    else if (entity_type == "CORP"){
                        const NewYorkForCORPHandler = new NewYorkForCORP();
                        return async () => {
                            const result = await NewYorkForCORPHandler.NewYorkForCORP(page,jsonData,payload);
                            return result;                            
                        }
                         
                    }
                case 'New Jersey':
                    if (entity_type == "LLC"){
                        const NewJersyForLLCHandler = new NewJersyForLLC();
                        return async () => {
                            const result = await NewJersyForLLCHandler.NewJersyForLLC(page,jsonData,payload);
                            return result;
                        };
                        // return NewJersyForLLCHandler;
                    }
                    else if (entity_type == "CORP"){
                        const NewJersyForCORPHandler = new NewJersyForCORP();
                        return async () => {
                            const result = await NewJersyForCORPHandler.NewJersyForCORP(page,jsonData,payload); // Call the form handler method
                            return result;                            
                        }
                    }
                case 'Montana':
                    if (entity_type == "LLC"){
                        const montanaForLLCHandler = new MontanaForLLC();
                        return async () => {
                            const result = await montanaForLLCHandler.MontanaForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const montanaForCORPHandler = new MontanaForCORP();
                        return async () => {
                            const result = await montanaForCORPHandler.MontanaForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case 'Wyoming':
                    if (entity_type == "LLC"){
                        const wyomingForLLCHandler = new WyomingForLLC();
                        return async () => {
                            const result = await wyomingForLLCHandler.WyomingForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const wyomingForCORPHandler = new WyomingForCORP();
                        return async () => {
                            const result = await wyomingForCORPHandler.WyomingForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
             

                case 'Kentucky':
                    if (entity_type == "LLC"){
                        const KentuckyForLLCHandler = new KentuckyForLLC();
                        return async () => {
                            const result = await KentuckyForLLCHandler.KentuckyForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const KentuckyForCORPHandler = new KentuckyForCORP();
                        return async () => {
                            const result = await KentuckyForCORPHandler.KentuckyForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    
                case 'Florida':
                    if (entity_type == "LLC"){
                        const FloridaForLLCHandler = new FloridaForLLC();
                        return async () => {
                            const result = await FloridaForLLCHandler.FloridaForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const FloridaForCORPHandler = new FloridaForCORP();
                        // await FloridaForCORPHandler.FloridaForCORP(page,jsonData,payload); // Call the form handler method
                        // return FloridaForCORPHandler;
                        return async () => {
                            const result = await FloridaForCORPHandler.FloridaForCORP(page,jsonData,payload);
                            return result;                            
                        };
                    }

                case 'Iowa':
                    if (entity_type == "LLC"){
                        const IowaForLLCHandler = new IowaForLLC();
                        return async () => {
                            const result = await IowaForLLCHandler.IowaForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const IowaForCORPHandler = new IowaForCORP();
                        return async () => {
                            const result = await IowaForCORPHandler.IowaForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case 'Vermont':
                    if (entity_type == "LLC"){
                        const VermontForLLCHandler = new VermontForLLC();
                        return async () => {
                            const result = await VermontForLLCHandler.VermontForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const VermontCORPHandler = new VermontForCorp();
                        return async () => {
                            const result = await VermontCORPHandler.VermontForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }

                case 'Indiana':
                    if (entity_type == "LLC"){
                        const IndianaForLLCHandler = new IndianaForLLC();
                        return async () => {
                            const result = await IndianaForLLCHandler.IndianaForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const IndianaForCORPHandler = new IndianaForCORP();
                        return async () => {
                            const result = await IndianaForCORPHandler.IndianaForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case 'Maryland':
                    if (entity_type == "LLC"){
                        const MarylandForLLCHandler = new MarylandForLLC();
                        return async () => {
                            const result = await MarylandForLLCHandler.MarylandForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const MarylandForCORPHandler = new MarylandForCORP();
                        return async () => {
                            const result = await MarylandForCORPHandler.MarylandForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }          
                   
                case 'DC':
                    if(entity_type =="LLC"){
                        const DcForLLCHandler = new DcForLLC();
                        return async () => {
                            const result = await DcForLLCHandler.DcForLLC(page,jsonData,payload);
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const DcForCORPHandler = new DcForCORP();
                        return async () => {
                            const result = await DcForCORPHandler.DcForCORP(page,jsonData,payload);
                            return result;
                        }
                    }
                case 'Kansas':
                    if (entity_type == "LLC"){
                        const KansasForLLCHandler = new KansasForLLC();
                        return async () => {
                            const result = await KansasForLLCHandler.KansasForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const KansasForCORPHandler = new KansasForCORP();
                        return async () => {
                            const result = await KansasForCORPHandler.KansasForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
            
        
                case 'Idaho':
                    if (entity_type == "LLC"){
                        const IdahoForLLCHandler = new IdahoForLLC();
                        return async () => {
                            const result = await IdahoForLLCHandler.IdahoForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const IdahoForCORPHandler = new IdahoForCORP();
                        return async () => {
                            const result = await IdahoForCORPHandler.IdahoForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case 'Arkansas':
                    if (entity_type == "LLC"){
                        const ArkansasForLLCHandler = new ArkansasForLLC();
                        return async () => {
                            const result = await ArkansasForLLCHandler.ArkansasForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const ArkansasForCORPHandler = new ArkansasForCORP();
                        return async () => {
                            const result = await ArkansasForCORPHandler.ArkansasForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                                }

                case 'Tennessee':
                    if (entity_type == "LLC"){
                        const TennesseeForLLCHandler = new TennesseeForLLC();
                        return async () => {
                            const result = await TennesseeForLLCHandler.TennesseeForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const TennesseeForCORPHandler = new TennesseeForCORP();
                        return async () => {
                            const result = await TennesseeForCORPHandler.TennesseeForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case 'South Dakota':
                    if (entity_type == "LLC"){
                        const SouthDakotaForLLCHandler = new SouthDakotaForLLC();
                        return async () => {
                            const result = await SouthDakotaForLLCHandler.SouthDakotaForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const SouthDakotaForCORPHandler = new SouthDakotaForCORP();
                        return async () => {
                            const result = await SouthDakotaForCORPHandler.SouthDakotaForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case "Hawaii":
                    if (entity_type == "LLC"){
                        const HawaiiForLLCHandler = new HawaiiForLLC();
                        return async () => {
                            const result = await HawaiiForLLCHandler.HawaiiForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const HawaiiForCorpHandler = new HawaiiForCorp();
                        return async () => {
                            const result = await HawaiiForCorpHandler.HawaiiForCorp(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case "Missouri":
                    if (entity_type == "LLC"){
                        const MissouriForLLCHandler = new MissouriForLLC();
                        return async () => {
                            const result = await MissouriForLLCHandler.MissouriForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const MissouriForCorpHandler = new MissouriForCorp();
                        return async () => {
                            const result = await MissouriForCorpHandler.MissouriForCorp(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case "Colorado":
                    if (entity_type == "LLC"){
                        const ColoradoForLLCHandler = new ColoradoForLLC();
                        return async () => {
                            const result = await ColoradoForLLCHandler.ColoradoForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const ColoradoForCorpHandler = new ColoradoForCorp();
                        console.log("i am in colorado")
                        return async () => {
                            const result = await ColoradoForCorpHandler.ColoradoForCorp(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case "North Dakota":
                    if (entity_type == "LLC"){
                        const NorthDakotaForLLCHandler = new NorthDakotaForLLC();
                        return async () => {
                            const result = await NorthDakotaForLLCHandler.NorthDakotaForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const NorthDakotaForCorpHandler = new NorthDakotaForCorp();
                        return async () => {
                            const result = await NorthDakotaForCorpHandler.NorthDakotaForCorp(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case 'Michigan':
                    if (entity_type =="LLC"){
                        const MichiganLLCFormHandler = new MichiganLLC();
                        return async () => {
                            const result = await MichiganLLCFormHandler.MichiganLLC(page,jsonData,payload);
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const MichiganCORPFormHandler = new MichiganCORP();
                        return async () => {
                            const result = await MichiganCORPFormHandler.MichiganCORP(page,jsonData,payload);
                            return result;
                        }
                    }
                case 'Rhode Island':
                    if(entity_type =="LLC"){
                        const RhodeislandForLLCHandler = new RhodeislandForLLC();
                        return async () => {
                            const result = await RhodeislandForLLCHandler.RhodeislandForLLC(page,jsonData,payload);
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const RhodeislandForCORPHandler = new RhodeislandForCORP();
                        return async () => {
                            const result = await RhodeislandForCORPHandler.RhodeislandForCORP(page,jsonData,payload);
                            return result;
                        }
                    }    
                case 'New Mexico':
                    if (entity_type === "LLC") {
                        const NewmaxicoForLLCHandler = new NewmaxicoForLLC();
                        return async () => {
                            const result = await NewmaxicoForLLCHandler.NewmaxicoForLLC(page, jsonData, payload);
                            return result;
                        };
                    }
                case 'Utah':
                    if(entity_type =="LLC"){
                        const UtahForLLCHandler = new UtahForLLC();
                        return async () => {
                            const result = await UtahForLLCHandler.UtahForLLC(page,jsonData,payload);
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const UtahForCorpHandler = new UtahForCORP();
                        return async () => {
                            const result =  await UtahForCorpHandler.UtahForCORP(page,jsonData,payload);
                            return result;
                        }
                    }
                case 'South Carolina':
                    if (entity_type == "LLC"){
                        const SouthCarolinaForLLCHandler = new SouthCarolinaForLLC();
                        return async () => {
                            const result = await SouthCarolinaForLLCHandler.SouthCarolinaForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const SouthCarolinaForCORPHandler = new SouthCarolinaForCORP();
                        return async () => {
                            const result = await SouthCarolinaForCORPHandler.SouthCarolinaForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case 'Louisiana':
                if (entity_type == "LLC"){
                    const LouisianaForLLCHandler = new LouisianaForLLC();
                    return async () => {
                        const result =  await LouisianaForLLCHandler.LouisianaForLLC(page,jsonData,payload); // Call the form handler method
                        return result;
                    }
                }
                else if (entity_type == "CORP"){
                    const LouisianaForCORPHandler = new LouisianaForCORP();
                    return async () => {
                        const result =  await LouisianaForCORPHandler.LouisianaForCORP(page,jsonData,payload); // Call the form handler method
                        return result;
                    }
                }
                case 'Oregon':
                    if (entity_type == "LLC"){
                        const AlabamaForLLCHandler = new OregonForLLC();
                        return async () => {
                            const result =  await AlabamaForLLCHandler.OregonForLLC(page,jsonData,payload);
                            return result;
                            }; 
                        }
                    else if (entity_type == "CORP"){
                        const AlabamaForCORPHandler = new OregonForCorp();
                        return async () => {
                            const result =  await AlabamaForCORPHandler.OregonForCorp(page,jsonData,payload);
                            return result;
                        }
                        
                    }
                case 'Illinois':
                    if (entity_type == "LLC"){
                        const IllinoisForLLCHandler = new IllinoisForLLC();
                        return async () => {
                            const result =  await IllinoisForLLCHandler.IllinoisForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const IllinoisForCORPHandler = new IllinoisForCORP();
                        return async () => {
                            const result =  await IllinoisForCORPHandler.IllinoisForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case 'Mississippi':
                    if(entity_type =="LLC"){
                        const MississippiForLLCHandler = new MississippiForLLC();
                        return async () =>{
                            const result =  await MississippiForLLCHandler.MississippiForLLC(page,jsonData,payload);
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const MississippiForCORPHandler = new MississippiForCORP();
                        return async () =>{
                            const result =  await MississippiForCORPHandler.MississippiForCORP(page,jsonData,payload);
                            return result;
                        }
                    }
                case 'Nebraska':
                    if (entity_type == "LLC"){
                        const NebraskaForLLCHandler = new NebraskaForLLC();
                        return async () => {
                            const result =  await NebraskaForLLCHandler.NebraskaForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const NebraskaForCORPHandler = new NebraskaForCORP();
                        return async () => {
                            const result =  await NebraskaForCORPHandler.NebraskaForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case 'Oklahoma':
                    if (entity_type == "LLC"){
                        const OklahomaForLLCHandler = new OklahomaForLLC();
                        return async () => {
                            const result =  await OklahomaForLLCHandler.OklahomaForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const OklahomaForCORPHandler = new OklahomaForCORP();
                        return async () => {
                            const result =  await OklahomaForCORPHandler.OklahomaForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                case 'Massachusetts':
                    if (entity_type == "LLC"){
                        const MassachusettsForLLCHandler = new MassachusettsForLLC();
                        return async () => {
                            const result =  await MassachusettsForLLCHandler.MassachusettsForLLC(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    else if (entity_type == "CORP"){
                        const MassachusettsForCORPHandler = new MassachusettsForCORP();
                        return async () => {
                            const result =  await MassachusettsForCORPHandler.MassachusettsForCORP(page,jsonData,payload); // Call the form handler method
                            return result;
                        }
                    }
                    case "North Carolina":
                                if (entity_type == "LLC"){
                                    const NorthCarolinaForLLCHandler = new NorthCarolinaForLLC();
                                    return async () => {
                                        return await NorthCarolinaForLLCHandler.NorthCarolinaForLLC(page,jsonData,payload); // Call the form handler method
                                    }
                                }
                                else if (entity_type == "CORP"){
                                    const NorthCarolinaForCorpHandler = new NorthCarolinaForCorp();
                                    return async () => {
                                        return await NorthCarolinaForCorpHandler.NorthCarolinaForCorp(page,jsonData,payload); // Call the form handler method
                                    }
                                }
                                case "Ohio":
                                        if (entity_type == "LLC"){
                                            const OhioForLLCHandler = new OhioForLLC();
                                            return async () => {
                                                return await OhioForLLCHandler.OhioForLLC(page,jsonData,payload);
                                            }
                                        }
                                        else if (entity_type == "CORP"){
                                            const OhioForCORPHandler = new OhioForCORP();
                                            return async () => {
                                                return await OhioForCORPHandler.OhioForCORP(page,jsonData,payload); 
                                            }
                                        }
                                        case "Minnesota":
                                                if (entity_type == "LLC"){
                                                    const MinnesotaForLLCHandler = new MinnesotaForLLC();
                                                    return async () => {
                                                        return await MinnesotaForLLCHandler.MinnesotaForLLC(page,jsonData,payload);
                                                    }
                                                }
                                                else if (entity_type == "CORP"){
                                                    const MinnesotaForCORPHandler = new MinnesotaForCORP();
                                                    return async () => {
                                                        return await MinnesotaForCORPHandler.MinnesotaForCORP(page,jsonData,payload); 
                                                    }
                                                }

                                                case "Virginia":
                                                    if (entity_type == "LLC"){
                                                        const VirginiaForLLCHandler = new VirginiaForLLC();
                                                        return async () => {
                                                            return await VirginiaForLLCHandler.VirginiaForLLC(page,jsonData,payload);
                                                        }
                                                    }
                                                    else if (entity_type == "CORP"){
                                                        const VirginiaForCORPHandler = new VirginiaForCORP();
                                                        return async () => {
                                                            return await VirginiaForCORPHandler.VirginiaForCORP(page,jsonData,payload); 
                                                        }
                                                    }

                default:
                    logger.warn(`No handler found for state: ${state}`);
                    return null; // Return null if no form handler exists for the state
                }
        } catch (error) {
            logger.error(`Error in StateFormFactory for state ${state}:`, error.stack);
            throw error; // Re-throw the error for upstream handling
        }
    }
}


module.exports = StateFormFactory;


